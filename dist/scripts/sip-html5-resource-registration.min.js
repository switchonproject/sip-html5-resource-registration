var app=angular.module("de.cismet.sip-html5-resource-registration",["ngAnimate","ngSanitize","ui.bootstrap","leaflet-directive","mgo-angular-wizard","ui.select","uuid","de.cismet.sip-html5-resource-registration.controllers","de.cismet.sip-html5-resource-registration.directives","de.cismet.sip-html5-resource-registration.services","de.cismet.sip-html5-resource-registration.factories","de.cismet.sip-html5-resource-registration.filters"]);app.config(["$logProvider",function(a){"use strict";a.debugEnabled(!1)}]),angular.module("de.cismet.sip-html5-resource-registration.controllers",[]),angular.module("de.cismet.sip-html5-resource-registration.controllers").controller("de.cismet.sip-html5-resource-registration.controllers.geoLocationController",["$scope","AppConfig","leafletData","de.cismet.sip-html5-resource-registration.services.geoTools","de.cismet.sip-html5-resource-registration.services.dataset","de.cismet.sip-html5-resource-registration.services.CountriesService",function(a,b,c,d,e,f){"use strict";var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;o=d.wicket,p=d.defaultStyle,q=d.defaultDrawOptions,r=d.noDrawOptions,t=d.readSpatialCoverage,s=d.writeSpatialCoverage,i=d.fireResize,g=this,g.config=b,g.dataset=e,g.contentLocation={},g.contentLocation.name="",g.contentLocation.bounds={},g.countries=[],g.countries["countries-world"]=f.getCountryList("countries-world"),g.countries["countries-europe"]=f.getCountryList("countries-europe"),g.onSelectedCountry=function(a){o.read(a.wkt);var b=o.toObject(p);n.clearLayers(),n.addLayer(b),c.getMap("mainmap").then(function(a){a.fitBounds(n.getBounds(),{animate:!0,pan:{animate:!0,duration:.6},zoom:{animate:!0}})})},a.mapData.center=g.config.mapView.home,a.mapData.defaults={tileLayer:g.config.mapView.backgroundLayer,minZoom:g.config.minZoom,path:p},a.wizard.enterValidators["Geographic Location"]=function(b){if(b.valid===!0){g.mode.drawBBox===!0?a.message.text="Please specify the extent of the dataset in the map <br>Use the map controls to draw a bounding box or a polygon that represents the spatial extent of the dataset.":a.message.text="Please specify the extent of the dataset in the map.",a.message.icon="fa-info-circle",a.message.type="success",i("mainmap");var d=t(g.dataset);void 0!==d&&null!==d&&(n.clearLayers(),n.addLayer(d),c.getMap("mainmap").then(function(a){setTimeout(function(){a.fitBounds(d,{animate:!0,pan:{animate:!0,duration:.75},zoom:{animate:!0}})},100)}))}return b.valid},a.wizard.exitValidators["Geographic Location"]=function(b){if(b.valid=!0,g.mode.defineBBox===!0&&a.coordinatesForm.$invalid?(a.message.text="Please specify a valid bounding box or use an other option to  specify the geographic location of the dataset!",a.message.icon="fa-warning",a.message.type="warning",b.valid=!1):n&&n.getLayers()&&0!==n.getLayers().length||(a.message.text="Please specify the geographic location of the dataset!",a.message.icon="fa-warning",a.message.type="warning",b.valid=!1),b.valid===!0){a.wizard.hasError=null;var c=o.fromObject(n.getLayers()[0]);c.write(),s(g.dataset,c)}return b.valid},g.mode={},g.mode.drawBBox=!0,g.mode.selectEC=!1,g.mode.selectWC=!1,g.mode.defineBBox=!1,g.switchMode=function(b){if(Object.keys(g.mode).forEach(function(a){b===a?g.mode[a]===!1&&(g.mode[a]=!0):g.mode[a]=!1},g.mode),a.message.icon="fa-info-circle",a.message.type="success",g.mode.drawBBox!==!0||u?u&&(m.setDrawingOptions(r),c.getMap("mainmap").then(function(a){a.removeControl(m)}),u=!1):(a.message.text="Please use the map controls to draw a bounding box or a polygon that represents the spatial extent of the dataset.",m.setDrawingOptions(q),c.getMap("mainmap").then(function(a){a.addControl(m)}),u=!0),g.mode.selectEC===!0&&(a.message.text="Select a European country or region that represents the spatial extent of the dataset."),this.mode.selectWC===!0&&(a.message.text="Select a World country or region that represents the spatial extent of the dataset."),g.mode.defineBBox===!0&&(a.message.text="Please enter a bounding box with westbound and eastbound longitudes, and southbound and northbound latitudes in decimal degrees, with a precision of at least two decimals.",n.getLayers().length>0)){var d=n.getBounds();g.contentLocation.bounds={},g.contentLocation.bounds.west=d.getWest(),g.contentLocation.bounds.south=d.getSouth(),g.contentLocation.bounds.east=d.getEast(),g.contentLocation.bounds.north=d.getNorth()}},g.applyBoundingBox=function(){if(void 0!==g.contentLocation.bounds.south&&void 0!==g.contentLocation.bounds.west&&void 0!==g.contentLocation.bounds.north&&void 0!==g.contentLocation.bounds.east){var a=[[g.contentLocation.bounds.south,g.contentLocation.bounds.west],[g.contentLocation.bounds.north,g.contentLocation.bounds.east]],b=L.rectangle(a,p);n.clearLayers(),n.addLayer(b),c.getMap("mainmap").then(function(a){a.fitBounds(b,{animate:!0,pan:{animate:!0,duration:.6},zoom:{animate:!0}})}),g.contentLocation.name="New user-defined Bounding Box"}},j=g.config.maxBounds&&angular.isArray(g.config.maxBounds.southWest)?L.latLng(h.maxBounds.southWest[0],g.config.maxBounds.southWest[1]):L.latLng(90,-180),k=g.config.maxBounds&&angular.isArray(g.config.maxBounds.northEast)?L.latLng(g.config.maxBounds.northEast[0],g.config.maxBounds.northEast[1]):L.latLng(-90,180),l=L.latLngBounds(j,k),c.getMap("mainmap").then(function(b){b.setMaxBounds(a.maxBounds)}),n=new L.FeatureGroup,m=new L.Control.Draw({draw:q,edit:{featureGroup:n}}),u=!0,c.getMap("mainmap").then(function(a){a.addLayer(n),a.addControl(m),a.on("draw:created",function(a){n.clearLayers(),n.addLayer(a.layer),g.contentLocation={},g.contentLocation.name="New "+a.layerType}),a.on("draw:edited",function(){g.contentLocation=Object.create(g.contentLocation),-1===g.contentLocation.name.indexOf("(edited)")&&(g.contentLocation.name+=" (edited)")}),a.on("draw:deleted",function(a){console.log(a.layers.getLayers().length+" deleted"),n.clearLayers(),g.contentLocation=null})})}]),angular.module("de.cismet.sip-html5-resource-registration.controllers").controller("de.cismet.sip-html5-resource-registration.controllers.keywordsController",["$scope","de.cismet.sip-html5-resource-registration.services.dataset",function(a,b){"use strict";var c;c=this,c.dataset=b,c.toggleSelection=function(b){var d=c.dataset.tags.indexOf(b);d>-1?a.dataset.tags.splice(d,1):a.dataset.tags.push(b)}}]),angular.module("de.cismet.sip-html5-resource-registration.controllers").controller("de.cismet.sip-html5-resource-registration.controllers.licenseController",["$scope","de.cismet.sip-html5-resource-registration.services.dataset","de.cismet.sip-html5-resource-registration.services.TagGroupService",function(a,b,c){"use strict";var d=this;d.dataset=b,a.tags.accessconditions=c.getTagList("access conditions","Creative Commons (CC BY),Creative Commons (CC BY-NC),Creative Commons (CC BY-NC-ND),Creative Commons (CC BY-NC-SA),Creative Commons (CC BY-ND),Creative Commons (CC BY-SA),for research only,no limitations,other"),a.wizard.enterValidators["License and Conditions"]=function(b){return b.valid===!0&&(a.message.text="Please select a predefined license for regulating the conditions for access and use of the resource and provide a brief statement or URL to the license which applies to the usage of the dataset. This statement should provide additional information.",a.message.icon="fa-info-circle",a.message.type="success"),b.valid},a.wizard.exitValidators["License and Conditions"]=function(b){b.valid=!0;var c=a.tags.accessconditions.every(function(a){return d.dataset.accessconditions&&d.dataset.accessconditions.name&&a.name===d.dataset.accessconditions.name?(d.dataset.accessconditions=a,!1):!0});return c?(a.message.text="Please select a valid access condition (e.g. no limitations).",a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetAccessconditions",b.valid=!1):a.licenseForm.datasetLicensestatement.$error.required?(a.message.text="Please provide a description of the license of type <i>other</i> or select another license from the list.",a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetLicensestatement",b.valid=!1):a.licenseForm.datasetContactemail.$error.email?(a.message.text="The email address to the contact person is not a valid.",a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetContactperson",b.valid=!1):a.licenseForm.datasetOrganisationurl.$error.url&&(a.message.text="The website url of the orgaisation is not a valid <a href='https://en.wikipedia.org/wiki/Uniform_Resource_Locator#Syntax' target='_blank' title='Uniform Resource Locator'>URL</a>.",a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetOrganisation",b.valid=!1),b.valid===!0&&(a.wizard.hasError=null),b.valid}}]),angular.module("de.cismet.sip-html5-resource-registration.controllers").controller("de.cismet.sip-html5-resource-registration.controllers.masterController",["$scope","AppConfig","WizardHandler","de.cismet.sip-html5-resource-registration.services.dataset","de.cismet.sip-html5-resource-registration.services.TagGroupService","$modal",function(a,b,c,d,e,f){"use strict";var g;g=this,g.config=b,g.dataset=d,a.dataset=d,a.config=b,a.tags=[],a.message={},a.message.text="<strong>Welcome to the SWITCH-ON tool for the registration of (hydrological) open-data in the <a href='http://www.water-switch-on.eu/sip-webclient/sip-beta/' title='Find open data with the SIP BYOD Client' target='_blank'>SWITCH-ON Spatial Information Platform</a>!</strong> <br>Please provide some general information about the new dataset such as name, description, a (download) link and keywords. ",a.message.icon="fa-info-circle",a.message.type="success",a.showInfoMessage=function(b){a.message.text=b,a.message.icon="fa-info-circle",a.message.type="success"},a.wizard={},a.wizard.uploadchoice=!1,a.wizard.enterValidators=[],a.wizard.exitValidators=[],a.wizard.currentStep="",a.wizard.canProceed=!0,a.wizard.canGoBack=!1,a.wizard.hasError=!1,a.wizard.proceedButtonText="Next",a.wizard.isFinishStep=function(){return"Summary"===a.wizard.currentStep},a.wizard.isFirstStep=function(){return"Dataset Description"===a.wizard.currentStep},a.mapData={},a.$watch("wizard.currentStep",function(b){b?(a.wizard.isFinishStep()?a.wizard.proceedButtonText="Finish":a.wizard.proceedButtonText="Next",a.wizard.canGoBack=!a.wizard.isFirstStep()):a.wizard.proceedButtonText="Next"}),g.finishedWizard=function(){f.open({animation:!0,templateUrl:"templates/confirmation.html",controller:"de.cismet.sip-html5-resource-registration.controllers.storageController",controllerAs:"storageController",keyboard:"false",size:"lg",backdrop:"static"})}}]),angular.module("de.cismet.sip-html5-resource-registration.controllers").controller("de.cismet.sip-html5-resource-registration.controllers.odRegistrationController",["$scope","$modal","$location","AppConfig","de.cismet.sip-html5-resource-registration.services.dataset","de.cismet.sip-html5-resource-registration.services.TagGroupService","de.cismet.sip-html5-resource-registration.services.searchService",function(a,b,c,d,e,f,g){"use strict";var h,i;i=void 0,h=this,h.dataset=e,h.config=d,h.groupBy=function(a){return a.name.indexOf(",")>-1?a.name.split(",",1)[0]:a.name.split(" ",1)[0]},h.checkLink=function(b){if(console.log(b),b){var c,e,f;e=function(b){b&&b.$collection&&b.$collection.length>0?(i='This dataset is alredy registered in the SWITCH-ON Spatial Information Platform under the name </strong>"'+b.$collection[0].name+'"</strong>. Click <a href="'+d.byod.baseUrl+"/#/resource/"+b.$collection[0].id+'" title="'+b.$collection[0].name+'" target="_blank">here</a> to view the dataset meta-data.',a.message.text=i,a.message.icon="fa-warning",a.message.type="info",a.wizard.hasError="datasetContentlocation"):i=void 0},f=function(a){console.log("search error: "+a),i=void 0},c=g.search(b).$promise.then(e,f)}i=void 0},h.selectKeywords=function(){b.open({animation:!0,templateUrl:"templates/keywordSelection.html",controller:"de.cismet.sip-html5-resource-registration.controllers.keywordsController",controllerAs:"keywordsController",keyboard:"true",size:"lg",scope:a})},h.gotoUploadTool=function(){var a=h.config.uploadtool.baseUrl+"?datasetname="+h.dataset.name;console.log(a),c.url(a)},h.checkUploadName=function(){return e.name?!0:(a.message.text="Please enter the name / title of the dataset before uploading ",a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetUploadchoiceName",!1)},a.tags["function"]=f.getTagList("function"),a.tags["content type"]=f.getTagList("content type"),a.tags["keywords - X-CUAHSI"]=f.getTagList("keywords - X-CUAHSI"),a.wizard.enterValidators["Dataset Description"]=function(b){return b.valid===!0&&(a.message.text="Please provide some general information about the new dataset such as name, description, a (download) link and keywords.",a.message.icon="fa-info-circle",a.message.type="success"),b.valid},a.wizard.exitValidators["Dataset Description"]=function(b){b.valid=!0;var c=a.tags["content type"].every(function(a){return h.dataset.representation[0]&&h.dataset.representation[0].contenttype&&a.name===h.dataset.representation[0].contenttype.name?(h.dataset.representation[0].contenttype=a,!1):!0}),d=a.tags["function"].every(function(a){return h.dataset.representation[0]&&h.dataset.representation[0]["function"]&&a.name===h.dataset.representation[0]["function"].name?(h.dataset.representation[0]["function"]=a,!1):!0});return e.name?void 0===e.$uploaded?(a.message.text="Please chose wheter you want to upload a new dataset or to provide a link to anexisting dataset.",a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetUploadchoice",b.valid=!1):d?(a.message.text="Please select a valid function (e.g. download) of the link.",a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetContentlocation",b.valid=!1):e.representation[0]["function"]?a.odRegistrationForm.datasetContentlocation.$error.url?(a.message.text="The link to the dataset you have provided is not a valid <a href='https://en.wikipedia.org/wiki/Uniform_Resource_Locator#Syntax' target='_blank' title='Uniform Resource Locator'>URL</a> .",a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetContentlocation",b.valid=!1):e.representation[0].contentlocation?i?(a.message.text=i,a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetContentlocation",b.valid=!1):c?(a.message.text="Please select a valid content type (e.g. ESRI Shapefile) of the link.",a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetContentlocation",b.valid=!1):e.representation[0].contenttype?e.description?h.dataset.tags&&0!==h.dataset.tags.length||(a.message.text="Please assign at least one keyword to the Dataset.",a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetTags",b.valid=!1):(a.message.text="Please provide a description of the dataset.",a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetDescription",b.valid=!1):(a.message.text="Please select a valid content type (e.g. ESRI Shapefile) of the link.",a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetContentlocation",b.valid=!1):(a.message.text="Please provide link to the dataset.",a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetContentlocation",b.valid=!1):(a.message.text="Please select a function (e.g. download) of the link.",a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetContentlocation",b.valid=!1):(a.message.text="Please enter the name / title of the dataset.",a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetName",b.valid=!1),b.valid===!0&&(a.wizard.hasError=null),b.valid}}]),angular.module("de.cismet.sip-html5-resource-registration.controllers").controller("de.cismet.sip-html5-resource-registration.controllers.storageController",["$scope","$http","$window","$interval","$location","$modalInstance","rfc4122","AppConfig","de.cismet.sip-html5-resource-registration.services.dataset","de.cismet.sip-html5-resource-registration.services.TagGroupService","de.cismet.sip-html5-resource-registration.services.storageService",function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l,m,n;m=(new Date).getTime(),n=c.navigator.userAgent,l=this,l.dataset=i,l.config=h,l.progress={},l.progress.message=null,l.progress.currval=0,l.progress.active=!0,l.progress.finished=!1,l.progress.error=null,l.progress.type="primary",l.progress.message="The dataset is now added to the SWITCH-ON Meta-Data Repository. <br>Please do not close this browser window until the uploaded has been completed",f.rendered.then(function(){var a,b,c;a=e.search().servicetype,b=e.search().servicename,c=e.search().serviceurl,a&&c?(l.dataset.representation[1].contentlocation=c,l.dataset.representation[1].name=b||l.dataset.name+" "+a,"WMS"===a&&b?(l.dataset.representation[2].contentlocation=c,l.dataset.representation[2].name=b):l.dataset.representation.splice(2,1)):l.dataset.representation.splice(1,2),l.dataset.metadata[1]&&l.dataset.metadata[1].description||l.dataset.representation.splice(1,1),j.getTagList("srid","EPSG:4326").$promise.then(function(a){l.dataset.srid=a[0],l.progress.currval+=10}),j.getTagList("conformity","Not evaluated").$promise.then(function(a){l.dataset.conformity=a[0],l.progress.currval+=10}),j.getTagList("language","eng").$promise.then(function(a){l.dataset.language=a[0],l.dataset.metadata[0].language=a[0],l.dataset.metadata[1]&&l.dataset.metadata[1].description&&(l.dataset.metadata[1].language=a[0]),l.progress.currval+=10}),j.getTagList("resource type","open data").$promise.then(function(a){l.dataset.type=a[0],l.progress.currval+=10}),j.getTagList("topic category","climatologyMeteorologyAtmosphere").$promise.then(function(a){l.dataset.topiccategory=a[0],l.progress.currval+=10}),j.getTagList("role","pointOfContact").$promise.then(function(a){l.dataset.contact.organisation||l.dataset.contact.name||l.dataset.contact.description||l.dataset.contact.email||l.dataset.contact.url?l.dataset.contact.role=a[0]:l.dataset.contact=null,l.progress.currval+=10}),j.getTagList("representation type").$promise.then(function(a){l.dataset.representation[0].type=a.getTagByName("original data"),l.dataset.representation[1]&&(l.dataset.representation[1].type=a.getTagByName("original data")),l.dataset.representation[2]&&(l.dataset.representation[2].type=a.getTagByName("aggregated data")),l.progress.currval+=10}),j.getTagList("protocol","WWW:LINK-1.0-http--link,OGC:WMS-1.1.1-http-get-capabilities,WWW:TILESERVER,OPeNDAP:OPeNDAP").$promise.then(function(b){l.dataset.representation[0].protocol=b.getTagByName("WWW:LINK-1.0-http--link"),l.dataset.representation[1]&&("WMS"===a?(l.dataset.representation[1].protocol=b.getTagByName("OGC:WMS-1.1.1-http-get-capabilities"),l.dataset.representation[1].contenttype=j.getTag("content type","application/xml",function(a){l.dataset.representation[1].contenttype=a}),l.dataset.representation[2]&&(l.dataset.representation[2].protocol=l.dataset.representation[1].protocol,l.dataset.representation[2].contenttype=l.dataset.representation[1].contenttype)):"OPeNDAP"===a&&(l.dataset.representation[1].protocol=b.getTagByName("OPeNDAP:OPeNDAP"),l.dataset.representation[1].contenttype=j.getTag("content type","text/html",function(a){l.dataset.representation[1].contenttype=a}))),l.progress.currval+=10}),j.getTagList("meta-data type","basic meta-data,lineage meta-data").$promise.then(function(a){l.dataset.metadata[0].type=a.getTagByName["basic meta-data"],l.dataset.metadata[1]&&l.dataset.metadata[1].description&&(l.dataset.metadata[1].type=a.getTagByName["lineage meta-data"]),l.progress.currval+=10}),j.getTagList("access limitations","limitation not listed").$promise.then(function(a){l.dataset.accesslimitations=a[0],l.progress.currval+=10}),j.getTagList("collection","Open Datasets").$promise.then(function(a){l.dataset.collection=a[0],l.progress.currval+=10})}),j.getTagList("meta-data standard","SWITCH-ON SIM").$promise.then(function(a){l.dataset.metadata[0].standard=a[0],l.dataset.metadata[1]&&l.dataset.metadata[1].description&&(l.dataset.metadata[1].standard=a[0]),l.progress.currval+=10}),l.dataset.representation[0].name=l.dataset.name,l.dataset.uuid=g.v4(),l.dataset.metadata[0].creationdate=m,l.dataset.metadata[0].description=n,l.dataset.metadata[1]&&l.dataset.metadata[1].description&&(l.dataset.metadata[1].creationdate=m),l.dataset.metadata[0].contenttype=j.getTag("content type","application/json",function(a){l.dataset.metadata[0].contenttype=a}),l.dataset.representation[1]&&(l.dataset.representation[1]["function"]=j.getTag("function","service",function(a){l.dataset.representation[1]["function"]=a}),l.dataset.representation[2]&&(l.dataset.representation[2]["function"]=l.dataset.representation[1]["function"])),l.progress.currval+=10,b({method:"GET",url:l.config.cidsRestApi.host+"/service/status"}).then(function(a){l.dataset.metadata[0].content=JSON.stringify(a.data.$collection),l.progress.currval+=10}),l.close=function(){f.close(),c.location.reload()},a.$watch(function(){return l.progress.currval},function(a){if(a&&140===a){var b=d(function(){l.progress.currval<190&&(l.progress.currval+=1)},200,50);k.store(i).$promise.then(function(a){d.cancel(b),l.progress.message="Your dataset has been successfully registered in the SWITCH-ON Spatial Information Platform. Please click <a href='"+h.byod.baseUrl+"/#/resource/"+a.id+"' title='"+a.name+"'>here</a> to view the dataset in the SWITCH-ON BYOD Client.",l.progress.active=!1,l.progress.finished=!0,l.progress.type="success",l.progress.currval=200},function(a){d.cancel(b),a.data.userMessage?l.progress.message="The dataset could not be saved in the Meta-Data Repository: <br>"+a.data.userMessage:this.progress.message="The dataset could not be saved in the Meta-Data Repository.",l.progress.active=!1,l.progress.finished=!0,l.progress.type="danger",l.progress.currval=200})}})}]),angular.module("de.cismet.sip-html5-resource-registration.controllers").controller("de.cismet.sip-html5-resource-registration.controllers.summaryController",["$scope","AppConfig","de.cismet.sip-html5-resource-registration.services.geoTools","de.cismet.sip-html5-resource-registration.services.dataset","leafletData",function(a,b,c,d,e){"use strict";var f,g,h,i,j,k,l,m,n;f=this,f.dataset=d,f.config=b,h=c.wicket,i=c.defaultStyle,j=c.defaultDrawOptions,k=c.noDrawOptions,l=c.readSpatialCoverage,m=c.writeSpatialCoverage,g=c.fireResize,n=new L.FeatureGroup,e.getMap("summarymap").then(function(a){a.addLayer(n)}),a.wizard.enterValidators.Summary=function(b){if(b.valid===!0){a.message.text="Please review the meta-data of the dataset and press <strong>Finish</strong> to register the dataset in the SWITCH-ON Spatial Information Platform.",a.message.icon="fa-info-circle",a.message.type="success",g("summarymap");var c=l(f.dataset);void 0!==c&&null!==c&&(n.clearLayers(),n.addLayer(c),e.getMap("summarymap").then(function(a){setTimeout(function(){a.fitBounds(c,{animate:!0,pan:{animate:!0,duration:.75},zoom:{animate:!0}})},100)}))}return b.valid},a.wizard.exitValidators.Summary=function(){return a.wizard.hasError=null,!0}}]),angular.module("de.cismet.sip-html5-resource-registration.directives",[]),angular.module("de.cismet.sip-html5-resource-registration.factories",[]),angular.module("de.cismet.sip-html5-resource-registration.factories").factory("AppConfig",[function(){"use strict";var a={};return a.cidsRestApi={},a.cidsRestApi.host="http://tl-243.xtr.deltares.nl/switchon_server_rest",a.searchService={},a.searchService.username="admin@SWITCHON",a.searchService.password="cismet",a.searchService.defautLimit=10,a.searchService.maxLimit=50,a.searchService.host=a.cidsRestApi.host,a.mapView={},a.mapView.backgroundLayer="http://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",a.mapView.home={},a.mapView.home.lat=49.245166,a.mapView.home.lng=6.936809,a.mapView.home.zoom=4,a.mapView.maxBounds={},a.mapView.maxBounds.southWest=[90,-180],a.mapView.maxBounds.northEast=[-90,180],a.mapView.minZoom=2,a.gui={},a.gui.dev=!1,a.objectInfo={},a.objectInfo.resourceJsonUrl="http://"+a.searchService.username+":"+a.searchService.password+"@"+a.searchService.host.replace(/.*?:\/\//g,""),a.objectInfo.resourceXmlUrl="http://tl-243.xtr.deltares.nl/csw?request=GetRecordById&service=CSW&version=2.0.2&namespace=xmlns%28csw=http://www.opengis.net/cat/csw/2.0.2%29&resultType=results&outputSchema=http://www.isotc211.org/2005/gmd&outputFormat=application/xml&ElementSetName=full&id=",a.byod={},a.byod.baseUrl="http://www.water-switch-on.eu/sip-webclient/byod/",a.uploadtool={},a.uploadtool.baseUrl="http://dl-ng003.xtr.deltares.nl",a}]),angular.module("de.cismet.sip-html5-resource-registration.filters",[]),angular.module("de.cismet.sip-html5-resource-registration.filters").filter("contenttype",function(){"use strict";return function(a){var b=[];return angular.forEach(a,function(a){b.push(a)}),b.sort(function(a,b){return-1!==a.description.indexOf("unknown")?-1:-1!==b.description.indexOf("unknown")?1:a.description.localeCompare(b.description)}),b}}),angular.module("de.cismet.sip-html5-resource-registration.filters").filter("function",function(){"use strict";return function(a){var b=[];return angular.forEach(a,function(a){("download"===a.name||"information"===a.name||"link to order data"===a.name)&&b.push(a)}),b.sort(function(a,b){return a.name.localeCompare(b.name)}),b}}),angular.module("de.cismet.sip-html5-resource-registration.filters").filter("limit",function(){"use strict";return function(a,b,c){return a.slice(b,c)}}),angular.module("de.cismet.sip-html5-resource-registration.filters").filter("htmlToPlaintext",function(){"use strict";return function(a){return a?String(a).replace(/<[^>]+>/gm,""):""}}),angular.module("de.cismet.sip-html5-resource-registration.services",["ngResource"]),angular.module("de.cismet.sip-html5-resource-registration.services").factory("de.cismet.sip-html5-resource-registration.services.CountriesService",["$resource",function(a){"use strict";var b,c,d,e;return b={"countries-world":"data/countriesWorld.json","countries-europe":"data/countriesEurope.json"},c=[],d=function(d,e){var f;return c.hasOwnProperty(d)?c[d]:b.hasOwnProperty(d)?(f=a(b[d],{},{query:{method:"GET",params:{},isArray:e}}),c[d]=f.query(),c[d]):(console.warn("unknown country group:"+d),null)},e=function(a){return d(a,!0)},{getCountryList:e}}]),angular.module("de.cismet.sip-html5-resource-registration.services").factory("de.cismet.sip-html5-resource-registration.services.dataset",["$resource","$location",function(a,b){"use strict";var c=a("data/datasetTemplate.json",{},{query:{method:"GET",params:{},isArray:!1}}).query();return c.$promise.then(function(a){if(a.name=b.search().name,a.representation[0].contentlocation=b.search().link,a.name&&a.representation[0].contentlocation){var c=b.search()["function"],d=b.search().format;a.$uploaded=!0,a.representation[0]["function"]={},!c||"download"!==c&&"information"!==c?a.representation[0]["function"].name="download":a.representation[0]["function"].name=c,a.representation[0].contenttype={},d?a.representation[0].contenttype.name=d:a.representation[0].contenttype.name="application/octet-stream"}}),c}]),angular.module("de.cismet.sip-html5-resource-registration.services").factory("de.cismet.sip-html5-resource-registration.services.geoTools",["leafletData",function(a){"use strict";var b,c,d,e,f,g,h;return b=new Wkt.Wkt,c={color:"#0000FF",fillOpacity:.3,weight:2,fill:!0,fillColor:"#1589FF",riseOnHover:!0,clickable:!0},e={polyline:!1,polygon:{shapeOptions:c,showArea:!0,metric:!0,allowIntersection:!1,drawError:{color:"#e1e100",message:"<strong>Oh snap!<strong> you can't draw that!</strong>"}},rectangle:{shapeOptions:c,metric:!0},circle:!1,marker:!1},d={polyline:!1,polygon:!1,rectangle:!1,circle:!1,marker:!1},f=function(a){if(a.spatialcoverage&&a.spatialcoverage.geo_field){var d=a.spatialcoverage.geo_field;b.read(d.substr(d.indexOf(";")+1));var e=b.toObject(c);return e.setStyle(c),e}},g=function(a,b){if(b&&a.spatialcoverage){var c="SRID=4326;"+b;a.spatialcoverage.geo_field=c}},h=function(b){a.getMap(b).then(function(a){setTimeout(function(){a.invalidateSize()},50)})},{wicket:b,defaultStyle:c,defaultDrawOptions:e,noDrawOptions:d,readSpatialCoverage:f,writeSpatialCoverage:g,fireResize:h}}]),angular.module("de.cismet.sip-html5-resource-registration.services").factory("de.cismet.sip-html5-resource-registration.services.searchService",["$resource","de.cismet.sip-html5-resource-registration.services.Base64","AppConfig",function(a,b,c){"use strict";var d,e,f,g;return d=c.searchService,e=b.encode(d.username+":"+d.password),f=a(d.host+"/searches/SWITCHON.de.cismet.cids.custom.switchon.search.server.ResourceContentLocationSearch/results",{limit:1,offset:0,omitNullValues:!0,deduplicate:!0},{search:{method:"POST",params:{limit:"@limit",offset:"@offset"},isArray:!1,headers:{Authorization:"Basic "+e}}}),g=function(a){var b,c;return b={list:[{key:"url",value:a}]},c=f.search({limit:1,offset:0},b)},{search:g}}]).factory("de.cismet.sip-html5-resource-registration.services.Base64",function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(b){var c,d,e,f,g,h="",i="",j="",k=0;do c=b.charCodeAt(k++),d=b.charCodeAt(k++),i=b.charCodeAt(k++),e=c>>2,f=(3&c)<<4|d>>4,g=(15&d)<<2|i>>6,j=63&i,isNaN(d)?g=j=64:isNaN(i)&&(j=64),h=h+a.charAt(e)+a.charAt(f)+a.charAt(g)+a.charAt(j),c=d=i="",e=f=g=j="";while(k<b.length);return h},decode:function(b){var c,d,e,f,g,h="",i="",j="",k=0,l=/[^A-Za-z0-9\+\/\=]/g;l.exec(b)&&console.error("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");do e=a.indexOf(b.charAt(k++)),f=a.indexOf(b.charAt(k++)),g=a.indexOf(b.charAt(k++)),j=a.indexOf(b.charAt(k++)),c=e<<2|f>>4,d=(15&f)<<4|g>>2,i=(3&g)<<6|j,h+=String.fromCharCode(c),64!==g&&(h+=String.fromCharCode(d)),64!==j&&(h+=String.fromCharCode(i)),c=d=i="",e=f=g=j="";while(k<b.length);return h}}}),angular.module("de.cismet.sip-html5-resource-registration.services").factory("de.cismet.sip-html5-resource-registration.services.storageService",["$resource","de.cismet.sip-html5-resource-registration.services.Base64","AppConfig",function(a,b,c){"use strict";var d,e,f,g;return d=c.searchService,e=b.encode(d.username+":"+d.password),f=a(d.host+"/SWITCHON.resource",{requestResultingInstance:!0,role:"all"},{store:{method:"POST",isArray:!1,headers:{Authorization:"Basic "+e}}}),g=function(a){var b;return b=f.store(a)},{store:g}}]),angular.module("de.cismet.sip-html5-resource-registration.services").factory("de.cismet.sip-html5-resource-registration.services.TagGroupService",["$resource","de.cismet.sip-html5-resource-registration.services.Base64","AppConfig",function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l;return h={"keyword-x-cuahsi":"X-CUAHSI"},d=[],f=c.searchService,g=b.encode(f.username+":"+f.password),i=a(f.host+"/searches/SWITCHON.de.cismet.cids.custom.switchon.search.server.TagsSearch/results",{limit:100,offset:0,omitNullValues:!0,deduplicate:!0},{search:{method:"POST",params:{},isArray:!1,headers:{Authorization:"Basic "+g}}}),j=function(a,b){var c,d;return c=b?{list:[{key:"taggroup",value:a},{key:"tags",value:b}]}:{list:[{key:"taggroup",value:a}]},d=i.search({},c)},e=function(a,b){var c,e,f;return d.hasOwnProperty(a)?d[a]:(c=j(a,b),e=[],e.$resolved=!1,e.getTagByName=function(a){for(var b=0;b<this.length;b++)if(this[b].name&&this[b].name===a)return this[b]},e.$promise=c.$promise.then(function(a){for(f=0;f<a.$collection.length;f++)e.push(a.$collection[f]);return e.$resolved=!0,e}),d[a]=e,d[a])},k=function(a,b){return e(a,b)},l=function(a,b,c){if(d.hasOwnProperty(a))if(d[a].$resolved===!0){for(var e=0;e<d[a].length;e++)if(d[a][e].name&&d[a][e].name===b)return d[a][e]}else c&&d[a].$promise.then(function(a){for(var d=0;d<a.length;d++)if(a[d].name&&a[d].name===b)return c(a[d]),
a[d]});return null},{getTagList:k,getTag:l}}]),angular.module("").run(["$templateCache",function(a){"use strict";a.put("templates/confirmation.html",'<div class=modal-header><h3 class=modal-title>SWITCH-ON Meta-Data Repository Upload</h3></div><div class=modal-body><p class=danger ng-bind-html=storageController.progress.message></p><progressbar class="progress-striped active" ng-class={active:storageController.progress.active} max=200 value=storageController.progress.currval type={{storageController.progress.type}}></progressbar></div><div class=modal-footer><button class="btn btn-primary" type=button ng-disabled=!storageController.progress.finished ng-click=storageController.close()>Close</button></div>'),a.put("templates/geographicLocation.html",'<div class=row ng-controller="de.cismet.sip-html5-resource-registration.controllers.geoLocationController as geoController"><div class=col-md-9><leaflet id=mainmap defaults=mapData.defaults center=mapData.center height=600px width=820px></leaflet></div><div class=col-md-3><div class=row><div class=col-md-12><label>Please select one</label></div></div><div class=row><div class=col-md-12><div class=btn-group-vertical><label class="btn btn-primary" ng-model=geoController.mode.drawBBox ng-click="geoController.switchMode(\'drawBBox\')" btn-radio=true>Define bounding box or polygon</label><label class="btn btn-primary" ng-model=geoController.mode.selectEC ng-click="geoController.switchMode(\'selectEC\')" btn-radio=true>Select European country or region</label><label class="btn btn-primary" ng-model=geoController.mode.selectWC ng-click="geoController.switchMode(\'selectWC\')" btn-radio=true>Select World country or region</label><label class="btn btn-primary" ng-model=geoController.mode.defineBBox ng-click="geoController.switchMode(\'defineBBox\')" btn-radio=true>Enter bounding box coordinates</label></div><div class=col-md-12></div><div class=row ng-show=geoController.mode.selectEC><div class=col-md-12><hr><label>European countries</label><ui-select ng-model=geoController.contentLocation.name theme=bootstrap ng-disabled=disabled sortable on-select=geoController.onSelectedCountry($item)><ui-select-match>{{$select.selected.name}}</ui-select-match><ui-select-choices repeat="country.name as country in geoController.countries[\'countries-europe\'] | filter: {name: $select.search}" position=down style=max-height:350px><div ng-bind-html="country.name | highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class=row ng-show=geoController.mode.selectWC><div class=col-md-12><hr><label>World countries</label><ui-select ng-model=geoController.contentLocation.name theme=bootstrap ng-disabled=disabled sortable on-select=geoController.onSelectedCountry($item)><ui-select-match>{{$select.selected.name}}</ui-select-match><ui-select-choices repeat="country.name as country in geoController.countries[\'countries-world\'] | filter: {name: $select.search}" position=down style=max-height:350px><div ng-bind-html="country.name | highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class=row ng-show=geoController.mode.defineBBox><div class=col-md-10><hr><form class=form-horizontal name=coordinatesForm id=coordinatesForm novalidate><div class=row><div class=col-md-12><label class=control-label for=north>North Bound Latitude</label></div></div><div class="row form-group" ng-class="{\'has-error\': !coordinatesForm.north.$error.required && coordinatesForm.north.$invalid,\r\n                                    \'has-success\': !coordinatesForm.north.$error.required && !coordinatesForm.north.$invalid}"><div class=col-md-12><input type=number class=form-control id=north name=north ng-model=geoController.contentLocation.bounds.north ng-change=geoController.applyBoundingBox() min=-90.00000000000000000 max=90.0000000000000000 required></div></div><div class=row><div class=col-md-12><label class=control-label for=east>East Bound Longitude</label></div></div><div class="row form-group" ng-class="{\'has-error\': !coordinatesForm.east.$error.required && coordinatesForm.east.$invalid,\r\n                                    \'has-success\': !coordinatesForm.east.$error.required && !coordinatesForm.east.$invalid}"><div class=col-md-12><input class=form-control type=number id=east name=east ng-model=geoController.contentLocation.bounds.east ng-change=geoController.applyBoundingBox() min=-180.0000000000000000 max=180.0000000000000000 required></div></div><div class=row><div class=col-md-12><label class=control-label for=south>South Bound Latitude</label></div></div><div class="row form-group" ng-class="{\'has-error\': !coordinatesForm.south.$error.required && coordinatesForm.south.$invalid,\r\n                                    \'has-success\': !coordinatesForm.south.$error.required && !coordinatesForm.south.$invalid}"><div class=col-md-12><input type=number class=form-control id=south name=south ng-model=geoController.contentLocation.bounds.south ng-change=geoController.applyBoundingBox() min=-90.00000000000000000 max=90.00000000000000000 required></div></div><div class=row><div class=col-md-12><label class=control-label for=west>West Bound Longitude</label></div></div><div class="row form-group" ng-class="{\'has-error\': !coordinatesForm.west.$error.required && coordinatesForm.west.$invalid,\r\n                                    \'has-success\': !coordinatesForm.west.$error.required && !coordinatesForm.west.$invalid}"><div class=col-md-12><input type=number class=form-control id=west name=west ng-model=geoController.contentLocation.bounds.west ng-change=geoController.applyBoundingBox() min=-180.0000000000000000 max=180.0000000000000000 required></div></div></form></div></div></div></div></div></div>'),a.put("templates/keywordSelection.html",'<div class=modal-header><div class=row><div class=col-md-12><h3 class=modal-title>Keyword Selection</h3></div></div><div class=row><div class=col-md-10><p>Please chose one or more <a href="https://www.cuahsi.org/" target=_blank>CUAHSI</a> Keywords from the extended <a href=http://his.cuahsi.org/ontologyfiles.html target=_blank>Hydrologic Ontology for Discovery</a>.</p></div><div class=col-md-2><button class="btn btn-primary pull-right" type=button ng-disabled="dataset.tags.length === 0" ng-click=$dismiss()>Close</button></div></div></div><div class=modal-body><div class="form-group row" ng-show="tags[\'keywords - X-CUAHSI\'].length === 0"><div class=col-md-2></div><div class=col-md-8><p>Please wait while the list of keywords is loaded.</p><progressbar class="progress-striped active" max=100 value=storageController.progress.currval></progressbar></div><div class=col-md-2></div></div><div class="form-group row" ng-show="tags[\'keywords - X-CUAHSI\'].length > 0"><div class=col-md-3><div class=checkbox ng-repeat="tag in tags[\'keywords - X-CUAHSI\']| limit:0:30"><label><input type=checkbox name=selectedKeywords value=tag ng-checked="dataset.tags.indexOf(tag) > -1" ng-click=keywordsController.toggleSelection(tag)> {{tag.name}}</label></div></div><div class=col-md-3><div class=checkbox ng-repeat="tag in tags[\'keywords - X-CUAHSI\']| limit:30:60"><label><input type=checkbox name=selectedKeywords value=tag ng-checked="dataset.tags.indexOf(tag) > -1" ng-click=keywordsController.toggleSelection(tag)> {{tag.name}}</label></div></div><div class=col-md-3><div class=checkbox ng-repeat="tag in tags[\'keywords - X-CUAHSI\']| limit:60:90"><label><input type=checkbox name=selectedKeywords value=tag ng-checked="dataset.tags.indexOf(tag) > -1" ng-click=keywordsController.toggleSelection(tag)> {{tag.name}}</label></div></div><div class=col-md-3><div class=checkbox ng-repeat="tag in tags[\'keywords - X-CUAHSI\']| limit:90:120"><label><input type=checkbox name=selectedKeywords value=tag ng-checked="dataset.tags.indexOf(tag) > -1" ng-click=keywordsController.toggleSelection(tag)> {{tag.name}}</label></div></div></div></div><div class=modal-footer><button class="btn btn-primary" type=button ng-disabled="dataset.tags.length === 0" ng-click=$dismiss()>Close</button></div>'),a.put("templates/licenseAndConditions.html",'<form class=form-horizontal id=licenseForm name=licenseForm ng-controller="de.cismet.sip-html5-resource-registration.controllers.licenseController as licenseController"><div class="row form-group" ng-class="{\'has-error\':wizard.hasError === \'datasetAccessconditions\'}"><label for=datasetAccessconditions class="col-md-2 form-control-label">Access Conditions</label><div class=col-md-3><select class=form-control id=datasetAccessconditions name=datasetAccessconditions ng-options="tag as tag.name for tag in tags[\'accessconditions\'] | orderBy:\'name\' track by tag.name" ng-model=dataset.accessconditions ng-change=showInfoMessage(dataset.accessconditions.description); required></select></div></div><div class="row form-group" ng-class="{\'has-error\':wizard.hasError === \'datasetLicensestatement\'}"><label for=datasetLicensestatement class="col-md-2 form-control-label">License Statement</label><div class=col-md-8><textarea class=form-control id=datasetDescription name=datasetLicensestatement placeholder="Additional conditions for accessing and using the data." rows=6 ng-model=dataset.licensestatement ng-focus="showInfoMessage(\'Please provide a brief statement or URL to the license which applies to the usage of the dataset.\')" ng-required="dataset.accessconditions && dataset.accessconditions.name === \'other\'" ng-disabled="(dataset.accessconditions.name !== \'other\') \r\n                                  && (dataset.accessconditions.name !== \'no limitations\')\r\n                                  && (dataset.accessconditions.name !== \'for research only\')"></textarea></div></div><div class="form-group row" ng-class="{\'has-error\':wizard.hasError === \'datasetContactperson\'}"><label for=datasetContactperson class="col-md-2 form-control-label">Contact Person</label><div class=col-md-5><input class=form-control id=datasetContactperson name=datasetContactperson placeholder="Optional point of contact information" ng-model=dataset.contact.name ng-focus="showInfoMessage(\'Please provide a name of the contact person responsible for the establishment, management, maintenance and distribution of dataset.\');"></div><div class=col-md-3><input type=email class=form-control id=datasetContactperson name=datasetContactemail placeholder="Optional email address" ng-model=dataset.contact.email ng-focus="showInfoMessage(\'Please provide an emal address of the contact person.\');"></div></div><div class="form-group row" ng-class="{\'has-error\':wizard.hasError === \'datasetOrganisation\'}"><label for=datasetOrganisation class="col-md-2 form-control-label">Institution</label><div class=col-md-4><input class=form-control id=datasetOrganisation name=datasetOrganisation placeholder="Optional name of the institution providing the dataset " ng-model=dataset.contact.organisation ng-focus="showInfoMessage(\'Please provide a name of the organisation responsible for the establishment, management, maintenance and distribution of dataset.\');"></div><div class=col-md-4><input type=url class=form-control id=datasetOrganisationurl name=datasetOrganisationurl placeholder="Optional Website of the organisation" ng-model=dataset.contact.url ng-focus="showInfoMessage(\'Please provide the url of the website of the name of the organisation.\');"></div></div><div class="row form-group" ng-class="{\'has-error\':wizard.hasError === \'datasetCitation\'}"><label for=datasetCitation class="col-md-2 form-control-label">Citation / DOI</label><div class=col-md-8><textarea class=form-control id=datasetDescription name=datasetCitation placeholder="Optional citation information" rows=3 ng-model=dataset.contact.description ng-focus="showInfoMessage(\'Please provide bibliographic citation or a Digital Object Identifier (<a href=\\\'https://www.doi.org/\\\' target=\\\'_blank\\\'>DOI</a>).\')">  \r\n            </textarea></div></div><div class="row form-group" ng-class="{\'has-error\':wizard.hasError === \'datasetLineage\'}"><label for=datasetLineage class="col-md-2 form-control-label">Data Lineage</label><div class=col-md-8><textarea class=form-control id=datasetDescription name=datasetLineage placeholder="Optional data lineage / data provenance information" rows=6 ng-model=dataset.metadata[1].description ng-focus="showInfoMessage(\'Provide information on the sources used to create datasets. Links and citations can be included.\')">  \r\n            </textarea></div></div></form>'),a.put("templates/openDataRegistration.html",'<form class=form-horizontal id=odRegistrationForm name=odRegistrationForm ng-controller="de.cismet.sip-html5-resource-registration.controllers.odRegistrationController as odRegistrationController"><div class="form-group row" ng-class="{\'has-error\':wizard.hasError === \'datasetName\'}"><label for=datasetName class="col-md-1 form-control-label">Name</label><div class=col-md-8><input class=form-control id=datasetName name=datasetName placeholder="Name of the dataset" ng-model=dataset.name required ng-disabled="dataset.name && dataset.$uploaded === true" ng-focus="showInfoMessage(\'Please provide a characteristic, and often unique, name by which the dataset is known.\');"></div></div><div class="row form-group" ng-class="{\'has-error\':wizard.hasError === \'datasetUploadchoice\'}" ng-show="dataset.$uploaded === undefined"><label for=datasetUploadchoice class="col-md-1 form-control-label">Link to Data</label><div class=col-md-10><button class="btn btn-primary" type=button ng-class="{\'btn-danger\':wizard.hasError === \'datasetUploadchoice\'}" ng-click="dataset.$uploaded = false">Provide Link to existing Dataset</button> <span>or</span> <button class="btn btn-primary disabled" type=button ng-class="{\'btn-danger\':(wizard.hasError === \'datasetUploadchoice\' || wizard.hasError === \'datasetUploadchoiceName\')}" tooltip="{{!dataset.name ? \'Please enter the name of the dataset to enable the Data Upload Tool\' : \'Open the  Data Upload Tool\'}}" ng-if=!dataset.name>Upload new Dataset</button> <a class="btn btn-primary" type=button ng-class="{\'btn-danger\':(wizard.hasError === \'datasetUploadchoice\' || wizard.hasError === \'datasetUploadchoiceName\')}" ng-href="{{config.uploadtool.baseUrl}}?datasetname={{dataset.name}}" tooltip="{{!dataset.name ? \'Please enter the name of the dataset to enable the Data Upload Tool\' : \'Open the  Data Upload Tool\'}}" ng-if=dataset.name>Upload new Dataset</a></div></div><div class="row form-group" ng-class="{\'has-error\':wizard.hasError === \'datasetContentlocation\'}" ng-show="dataset.$uploaded !== undefined"><label for=datasetContentlocation class="col-md-1 form-control-label">Link to Data</label><div class=col-md-2><select class=form-control ng-style="(!dataset.representation[0].function \r\n                                && !odRegistrationForm.datasetFunction.$touched) && {\'color\':\'#999999\'}" id=datasetFunction name=datasetFunction placeholder="Type of Link" ng-options="tag as tag.name for tag in tags[\'function\'] | function:\'name\' track by tag.name" ng-model=dataset.representation[0].function ng-change=showInfoMessage(dataset.representation[0].function.description); ng-disabled="dataset.$uploaded === true && dataset.representation[0].function" required><option style=color:#999999 ng-show=!dataset.representation[0].function value="">Type of Link</select></div><div class=col-md-6><input type=url class=form-control name=datasetContentlocation id=datasetContentlocation placeholder="URL of the dataset" ng-model=dataset.representation[0].contentlocation ng-focus="showInfoMessage(\'Please provide a download link to the dataset or a link to additional information about the dataset.\');" ng-change=odRegistrationController.checkLink(dataset.representation[0].contentlocation) ng-model-options="{ debounce: 1000 }" ng-disabled="dataset.$uploaded === true && dataset.representation[0].contentlocation" required></div><div class=col-md-3><select class=form-control ng-style="(!dataset.representation[0].contenttype \r\n                                && !odRegistrationForm.datasetContenttype.$touched) && {\'color\':\'#999999\'}" id=datasetContenttype name=datasetContenttype placeholder="Choose file format" ng-options="tag as tag.description for tag in tags[\'content type\'] | contenttype:\'description\' track by tag.name" ng-model=dataset.representation[0].contenttype ng-change="showInfoMessage(\'The <a href=\\\'https://en.wikipedia.org/wiki/Media_type\\\' target=\\\'_blank\\\'>media type</a> of the \' + dataset.representation[0].contenttype.description +  \' dataset file is <i>\'+dataset.representation[0].contenttype.name + \'</i>.\');" ng-disabled="dataset.$uploaded === true && dataset.representation[0].contenttype" required><option style=color:#999999 ng-show=!dataset.representation[0].contenttype value="">Choose file format</select></div></div><div class="form-group row" ng-class="{\'has-error\':wizard.hasError === \'datasetDescription\'}"><label for=datasetDescription class="col-md-1 form-control-label">Description</label><div class=col-md-8><textarea class=form-control id=datasetDescription name=datasetDescription placeholder="Description of the dataset" rows=8 ng-model=dataset.description ng-focus="showInfoMessage(\'Please provide a brief narrative summary of the content of the dataset.\')" required></textarea></div></div><div class="form-group row"><label class="col-md-1 form-control-label">Keywords</label><div class=col-md-8><div class="form-control switchon-keywords-form" ng-click="showInfoMessage(\'Please select one or more keywords from the <strong>extended</strong> CUAHSI Hydrologic Ontology for Discovery that best characterize the dataset. <br>Please click <a href=\\\'http://his.cuahsi.org/ontologyfiles.html\\\' target=\\\'_blank\\\'>here</a> for more information about the CUAHSI ontology. Get in touch with the <a href=\\\'mailto:switchon.wm@gmail.com\\\'>SWITCH-ON Consortium</a> if you want to make a proposal for new keywords.\'); odRegistrationController.selectKeywords();"><span ng-repeat="tag in dataset.tags"><span class="label label-primary">{{tag.name}}</span></span></div></div></div></form>'),a.put("templates/summary.html",'<div ng-controller="de.cismet.sip-html5-resource-registration.controllers.summaryController as summaryController"><div class=row><div class=col-md-6><div class=row><label class=col-md-3>Name</label><div class=col-md-9>{{dataset.name}}</div></div><div class=row><label class=col-md-3>Link to data</label><div class=col-md-9><a href={{dataset.representation[0].contentlocation}} target=_blank title={{dataset.name}}>{{dataset.representation[0].contentlocation}}</a></div></div><div class=row><label class=col-md-3>Type of Link</label><div class=col-md-9><span class="label label-success" style="text-transform: capitalize" title={{dataset.representation[0].function.description}}>{{dataset.representation[0].function.name}}</span></div></div><div class=row><label class=col-md-3>Format</label><div class=col-md-9><span class="label label-success" title={{dataset.representation[0].contenttype.description}}>{{dataset.representation[0].contenttype.name}}</span></div></div><div class=row><label class=col-md-3>Description</label><div class=col-md-9><p>{{dataset.description}}</p></div></div><div class=row><label class=col-md-3>Keywords</label><div class=col-md-9><span ng-repeat="tag in dataset.tags"><span class="label label-primary">{{tag.name}}</span></span></div></div><div class=row><label class=col-md-3>License</label><div class=col-md-9><span class="label label-warning" title="{{dataset.accessconditions.description | htmlToPlaintext}}">{{dataset.accessconditions.name}}</span></div></div><div class=row ng-if=dataset.licensestatement><label class=col-md-3>License</label><div class=col-md-9><p>{{dataset.licensestatement}}</p></div></div><div class=row ng-if="dataset.contact && dataset.contact.name"><label class=col-md-3>Contact Person</label><div class=col-md-9><span ng-if=dataset.contact.name>{{dataset.contact.name}}</span> <span ng-if=dataset.contact.email>&lt; <a ng-if="dataset.contact.email.indexOf(\' \') === -1" href=mailto:{{dataset.contact.email}}>{{dataset.contact.email}}</a> <span ng-if="dataset.contact.email.indexOf(\' \') !== -1">{{dataset.contact.email}}</span> &gt;</span></div></div><div class=row ng-if="dataset.contact && dataset.contact.organisation"><label class=col-md-3>Institute</label><div class=col-md-9><span ng-if="dataset.contact.organisation && !dataset.contact.url">{{dataset.contact.organisation}}</span> <span ng-if="dataset.contact.organisation && dataset.contact.url"><a href={{dataset.contact.url}} target=_blank rel=nofollow>{{dataset.contact.organisation}}</a></span></div></div><div class=row ng-if="dataset.contact && dataset.contact.description"><label class=col-md-3>Citation / DOI</label><div class=col-md-9>{{dataset.contact.description}}</div></div><div class=row ng-if=dataset.metadata[1].description><label class=col-md-3>Data Lineage</label><div class=col-md-9>{{dataset.metadata[1].description}}</div></div></div><div class=col-md-6><leaflet id=summarymap defaults=mapData.defaults center=mapData.center height=460px width=540px></leaflet></div></div></div>'),a.put("templates/wizard-step-tpl.html",'<section ng-show=selected ng-class="{current: selected, done: completed}" class=step><div class="panel panel-primary"><div class=panel-heading><h1 class=panel-title>{{wzTitle}}</h1></div><div class=panel-body><div ng-transclude></div></div><div class="panel-footer clearfix"><button type=button class="btn btn-primary pull-right" wz-next ng-disabled=!wzData.canProceed>{{wzData.proceedButtonText}}</button> <span class=pull-right>&nbsp;</span> <button type=button class="btn btn-default pull-right" wz-previous ng-disabled=!wzData.canGoBack>Previous</button></div></div></section>'),a.put("templates/wizard-tpl.html",'<div><div class=steps ng-transclude></div><ul class="steps-indicator steps-{{getEnabledSteps().length}}" ng-if=!hideIndicators><li ng-class="{default: !step.completed && !step.selected, \r\n                  current: step.selected && !step.completed, \r\n                  done: step.completed && !step.selected, \r\n                  editing: step.selected && step.completed}" ng-repeat="step in getEnabledSteps()"><a ng-click=goTo(step)>{{step.title || step.wzTitle}}</a></li></ul></div>')}]);
//# sourceMappingURL=sip-html5-resource-registration.min.js.map