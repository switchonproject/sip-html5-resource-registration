var app=angular.module("de.cismet.sip-html5-resource-registration",["ngAnimate","ngSanitize","ui.bootstrap","leaflet-directive","uiSwitch","mgo-angular-wizard","ui.select","de.cismet.sip-html5-resource-registration.controllers","de.cismet.sip-html5-resource-registration.directives","de.cismet.sip-html5-resource-registration.services","de.cismet.sip-html5-resource-registration.factories"]);app.config(["$logProvider",function(a){"use strict";a.debugEnabled(!1)}]),angular.module("de.cismet.sip-html5-resource-registration.controllers",[]),angular.module("de.cismet.sip-html5-resource-registration.controllers").controller("de.cismet.sip-html5-resource-registration.controllers.geoLocationController",["$scope","AppConfig","leafletData","de.cismet.sip-html5-resource-registration.services.geoTools","de.cismet.sip-html5-resource-registration.services.dataset","de.cismet.sip-html5-resource-registration.services.CountriesService",function(a,b,c,d,e,f){"use strict";var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;o=d.wicket,p=d.defaultStyle,q=d.defaultDrawOptions,r=d.noDrawOptions,t=d.readSpatialCoverage,s=d.writeSpatialCoverage,i=d.fireResize,g=this,g.config=b,g.dataset=e,g.contentLocation={},g.contentLocation.name="",g.contentLocation.bounds={},g.countries=[],g.countries["countries-world"]=f.getCountryList("countries-world"),g.countries["countries-europe"]=f.getCountryList("countries-europe"),g.onSelectedCountry=function(a){o.read(a.wkt);var b=o.toObject(p);n.clearLayers(),n.addLayer(b),c.getMap("mainmap").then(function(a){a.fitBounds(n.getBounds(),{animate:!0,pan:{animate:!0,duration:.6},zoom:{animate:!0}})})},a.mapData.center=g.config.mapView.home,a.mapData.defaults={tileLayer:g.config.mapView.backgroundLayer,minZoom:g.config.minZoom,path:p},a.wizard.enterValidators["Geographic Location"]=function(b){if(b.valid===!0){g.mode.drawBBox===!0?a.message.text="Please specify the extent of the dataset in the geographic space. <br>Use use the map controls to draw a bounding box or a polygon that represents the spatial extent of the dataset.":a.message.text="Please specify the extent of the dataset in the geographic space.",a.message.icon="fa-info-circle",a.message.type="success",i("mainmap");var d=t(g.dataset);void 0!==d&&null!==d&&(n.clearLayers(),n.addLayer(d),c.getMap("mainmap").then(function(a){setTimeout(function(){a.fitBounds(d,{animate:!0,pan:{animate:!0,duration:.75},zoom:{animate:!0}})},100)}))}return b.valid},a.wizard.exitValidators["Geographic Location"]=function(b){if(b.valid=!0,g.mode.defineBBox===!0&&a.coordinatesForm.$invalid?(a.message.text="Please specify a valid bounding box or use an other option to  specify the geographic location of the dataset!",a.message.icon="fa-warning",a.message.type="warning",b.valid=!1):n&&n.getLayers()&&0!==n.getLayers().length||(a.message.text="Please specify the geographic location of the dataset!",a.message.icon="fa-warning",a.message.type="warning",b.valid=!1),b.valid===!0){a.wizard.hasError=null;var c=o.fromObject(n.getLayers()[0]);c.write(),s(g.dataset,c)}return b.valid},g.mode={},g.mode.drawBBox=!0,g.mode.selectEC=!1,g.mode.selectWC=!1,g.mode.defineBBox=!1,g.switchMode=function(b){if(Object.keys(g.mode).forEach(function(a){b===a?g.mode[a]===!1&&(g.mode[a]=!0):g.mode[a]=!1},g.mode),a.message.icon="fa-info-circle",a.message.type="success",g.mode.drawBBox!==!0||u?u&&(m.setDrawingOptions(r),c.getMap("mainmap").then(function(a){a.removeControl(m)}),u=!1):(a.message.text="Please use the map controls to draw a bounding box or a polygon that represents the spatial extent of the dataset.",m.setDrawingOptions(q),c.getMap("mainmap").then(function(a){a.addControl(m)}),u=!0),g.mode.selectEC===!0&&(a.message.text="Select a European country or region that represents the spatial extent of the dataset."),this.mode.selectWC===!0&&(a.message.text="Select a World country or region that represents the spatial extent of the dataset."),g.mode.defineBBox===!0&&(a.message.text="Please enter a bounding box with westbound and eastbound longitudes, and southbound and northbound latitudes in decimal degrees, with a precision of at least two decimals.",n.getLayers().length>0)){var d=n.getBounds();g.contentLocation.bounds={},g.contentLocation.bounds.west=d.getWest(),g.contentLocation.bounds.south=d.getSouth(),g.contentLocation.bounds.east=d.getEast(),g.contentLocation.bounds.north=d.getNorth()}},g.applyBoundingBox=function(){var a=[[g.contentLocation.bounds.south,g.contentLocation.bounds.west],[g.contentLocation.bounds.north,g.contentLocation.bounds.east]],b=L.rectangle(a,p);n.clearLayers(),n.addLayer(b),c.getMap("mainmap").then(function(a){a.fitBounds(b,{animate:!0,pan:{animate:!0,duration:.6},zoom:{animate:!0}})}),g.contentLocation.name="New user-defined Bounding Box"},j=g.config.maxBounds&&angular.isArray(g.config.maxBounds.southWest)?L.latLng(h.maxBounds.southWest[0],g.config.maxBounds.southWest[1]):L.latLng(90,-180),k=g.config.maxBounds&&angular.isArray(g.config.maxBounds.northEast)?L.latLng(g.config.maxBounds.northEast[0],g.config.maxBounds.northEast[1]):L.latLng(-90,180),l=L.latLngBounds(j,k),c.getMap("mainmap").then(function(b){b.setMaxBounds(a.maxBounds)}),n=new L.FeatureGroup,m=new L.Control.Draw({draw:q,edit:{featureGroup:n}}),u=!0,c.getMap("mainmap").then(function(a){a.addLayer(n),a.addControl(m),a.on("draw:created",function(a){n.clearLayers(),n.addLayer(a.layer),g.contentLocation={},g.contentLocation.name="New "+a.layerType}),a.on("draw:edited",function(){g.contentLocation=Object.create(g.contentLocation),-1===g.contentLocation.name.indexOf("(edited)")&&(g.contentLocation.name+=" (edited)")}),a.on("draw:deleted",function(a){console.log(a.layers.getLayers().length+" deleted"),n.clearLayers(),g.contentLocation=null})})}]),angular.module("de.cismet.sip-html5-resource-registration.controllers").controller("de.cismet.sip-html5-resource-registration.controllers.licenseController",["$scope","de.cismet.sip-html5-resource-registration.services.dataset","de.cismet.sip-html5-resource-registration.services.TagGroupService",function(a,b,c){"use strict";var d=this;d.dataset=b,a.tags.accessconditions=c.getTagList("access conditions","CC BY-NC-SA,for research only,no limitations,other"),a.wizard.enterValidators["License and Conditions"]=function(b){return b.valid===!0&&(a.message.text="Please select a predefined license for regulating the conditions for access and use of the resource and provide a brief statement or URL to the license which applies to the usage of the dataset. This statement should provide additional information.",a.message.icon="fa-info-circle",a.message.type="success"),b.valid},a.wizard.exitValidators["License and Conditions"]=function(b){b.valid=!0;var c=a.tags.accessconditions.every(function(a){return d.dataset.accessconditions&&d.dataset.accessconditions.name&&a.name===d.dataset.accessconditions.name?(d.dataset.accessconditions=a,!1):!0});return c?(a.message.text="Please select a valid access condition (e.g. no limitations).",a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetAccessconditions",b.valid=!1):a.licenseForm.datasetLicensestatement.$error.required&&(a.message.text="Please provide a description of the license of type <i>other</i> or select another license from the list.",a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetLicensestatement",b.valid=!1),b.valid===!0&&(a.wizard.hasError=null),b.valid}}]),angular.module("de.cismet.sip-html5-resource-registration.controllers").controller("de.cismet.sip-html5-resource-registration.controllers.masterController",["$scope","AppConfig","WizardHandler","de.cismet.sip-html5-resource-registration.services.dataset","$uibModal",function(a,b,c,d,e){"use strict";var f;f=this,a.dataset=d,a.tags=[],a.message={},a.message.text="<strong>Welcome to the SWITCH-ON tool for the registration of (hydrological) open-data in the <a href='http://www.water-switch-on.eu/sip-webclient/sip-beta/' title='Find open data with the SIP BYOD Client' target='_blank'>SWITCH-ON Spatial Information Platform</a>!</strong> <br>Please provide some general information about the new dataset such as name, description, a (download) link and keywords. ",a.message.icon="fa-info-circle",a.message.type="success",a.showInfoMessage=function(b){a.message.text=b,a.message.icon="fa-info-circle",a.message.type="success"},a.wizard={},a.wizard.enterValidators=[],a.wizard.exitValidators=[],a.wizard.currentStep="",a.wizard.canProceed=!0,a.wizard.canGoBack=!1,a.wizard.hasError=!1,a.wizard.proceedButtonText="Next",a.wizard.isFinishStep=function(){return"Summary"===a.wizard.currentStep},a.wizard.isFirstStep=function(){return"Dataset Description"===a.wizard.currentStep},a.mapData={},a.$watch("wizard.currentStep",function(b){b?(a.wizard.isFinishStep()?a.wizard.proceedButtonText="Finish":a.wizard.proceedButtonText="Next",a.wizard.canGoBack=!a.wizard.isFirstStep()):a.wizard.proceedButtonText="Next"}),f.finishedWizard=function(){e.open({animation:!0,templateUrl:"templates/confirmation.html",size:"lg"})}}]),angular.module("de.cismet.sip-html5-resource-registration.controllers").controller("de.cismet.sip-html5-resource-registration.controllers.odRegistrationController",["$scope","$http","AppConfig","WizardHandler","de.cismet.sip-html5-resource-registration.services.dataset","de.cismet.sip-html5-resource-registration.services.TagGroupService",function(a,b,c,d,e,f){"use strict";var g=this;g.dataset=e,g.groupBy=function(a){return a.name.indexOf(",")>-1?a.name.split(",",1)[0]:a.name.split(" ",1)[0]},g.checkLink=function(a){console.log("checkLink not yet implemented: "+a)},a.tags["function"]=f.getTagList("function","download,order,information"),a.tags["content type"]=f.getTagList("content type"),a.tags["keywords - X-CUAHSI"]=f.getTagList("keywords - X-CUAHSI"),a.wizard.enterValidators["Dataset Description"]=function(b){return b.valid===!0&&(a.message.text="Please provide some general information about the new dataset such as name, description, a (download) link and keywords.",a.message.icon="fa-info-circle",a.message.type="success"),b.valid},a.wizard.exitValidators["Dataset Description"]=function(b){b.valid=!0;var c=a.tags["content type"].every(function(a){return g.dataset.representation[0]&&g.dataset.representation[0].contenttype&&a.name===g.dataset.representation[0].contenttype.name?(g.dataset.representation[0].contenttype=a,!1):!0}),d=a.tags["function"].every(function(a){return g.dataset.representation[0]&&g.dataset.representation[0]["function"]&&a.name===g.dataset.representation[0]["function"].name?(g.dataset.representation[0]["function"]=a,!1):!0});return e.name?d?(a.message.text="Please select a valid function (e.g. download) of the link.",a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetContentlocation",b.valid=!1):a.odRegistrationForm.datasetContentlocation.$error.url?(a.message.text="The link to the dataset you have provided is not a valid <a href='https://en.wikipedia.org/wiki/Uniform_Resource_Locator#Syntax' target='_blank' title='Uniform Resource Locator'>URL</a> .",a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetContentlocation",b.valid=!1):e.representation[0].contentlocation?c?(a.message.text="Please select a valid content type (e.g. ESRI Shapefile) of the link.",a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetContentlocation",b.valid=!1):e.description?g.dataset.tags&&0!==g.dataset.tags.length||(a.message.text="Please assign at least one keyword to the Dataset.",a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetTags",b.valid=!1):(a.message.text="Please provide a description of the dataset.",a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetDescription",b.valid=!1):(a.message.text="Please provide link to the dataset.",a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetContentlocation",b.valid=!1):(a.message.text="Please enter the name / title of the dataset.",a.message.icon="fa-warning",a.message.type="warning",a.wizard.hasError="datasetName",b.valid=!1),b.valid===!0&&(a.wizard.hasError=null),b.valid}}]),angular.module("de.cismet.sip-html5-resource-registration.controllers").controller("de.cismet.sip-html5-resource-registration.controllers.summaryController",["$scope","AppConfig","de.cismet.sip-html5-resource-registration.services.geoTools","de.cismet.sip-html5-resource-registration.services.dataset","leafletData",function(a,b,c,d,e){"use strict";var f,g,h,i,j,k,l,m,n;f=this,f.dataset=d,f.config=b,h=c.wicket,i=c.defaultStyle,j=c.defaultDrawOptions,k=c.noDrawOptions,l=c.readSpatialCoverage,m=c.writeSpatialCoverage,g=c.fireResize,n=new L.FeatureGroup,e.getMap("summarymap").then(function(a){a.addLayer(n)}),a.wizard.enterValidators.Summary=function(b){if(b.valid===!0){a.message.text="Please review the meta-data of the dataset and press <strong>Finish</strong> to register the dataset in the SWITCH-ON Spatial Information Platform.",a.message.icon="fa-info-circle",a.message.type="success",g("summarymap");var c=l(f.dataset);void 0!==c&&null!==c&&(n.clearLayers(),n.addLayer(c),e.getMap("summarymap").then(function(a){setTimeout(function(){a.fitBounds(c,{animate:!0,pan:{animate:!0,duration:.75},zoom:{animate:!0}})},100)}))}return b.valid},a.wizard.exitValidators.Summary=function(){return a.wizard.hasError=null,!0}}]),angular.module("de.cismet.sip-html5-resource-registration.directives",[]),angular.module("de.cismet.sip-html5-resource-registration.factories",[]),angular.module("de.cismet.sip-html5-resource-registration.factories").factory("AppConfig",[function(){"use strict";var a={};return a.searchService={},a.searchService.username="admin@SWITCHON",a.searchService.password="cismet",a.searchService.defautLimit=10,a.searchService.maxLimit=50,a.searchService.host="http://switchon.cismet.de/legacy-rest1",a.mapView={},a.mapView.backgroundLayer="http://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",a.mapView.home={},a.mapView.home.lat=49.245166,a.mapView.home.lng=6.936809,a.mapView.home.zoom=4,a.mapView.maxBounds={},a.mapView.maxBounds.southWest=[90,-180],a.mapView.maxBounds.northEast=[-90,180],a.mapView.minZoom=2,a.gui={},a.gui.dev=!1,a.objectInfo={},a.objectInfo.resourceJsonUrl="http://"+a.searchService.username+":"+a.searchService.password+"@"+a.searchService.host.replace(/.*?:\/\//g,""),a.objectInfo.resourceXmlUrl="http://tl-243.xtr.deltares.nl/csw?request=GetRecordById&service=CSW&version=2.0.2&namespace=xmlns%28csw=http://www.opengis.net/cat/csw/2.0.2%29&resultType=results&outputSchema=http://www.isotc211.org/2005/gmd&outputFormat=application/xml&ElementSetName=full&id=",a}]),angular.module("de.cismet.sip-html5-resource-registration.services",["ngResource"]),angular.module("de.cismet.sip-html5-resource-registration.services").factory("de.cismet.sip-html5-resource-registration.services.CountriesService",["$resource",function(a){"use strict";var b,c,d,e;return b={"countries-world":"data/countriesWorld.json","countries-europe":"data/countriesEurope.json"},c=[],d=function(d,e){var f;return c.hasOwnProperty(d)?c[d]:b.hasOwnProperty(d)?(f=a(b[d],{},{query:{method:"GET",params:{},isArray:e}}),c[d]=f.query(),c[d]):(console.warn("unknown country group:"+d),null)},e=function(a){return d(a,!0)},{getCountryList:e}}]),angular.module("de.cismet.sip-html5-resource-registration.services").factory("de.cismet.sip-html5-resource-registration.services.dataset",["$resource",function(a){"use strict";var b=a("data/datasetTemplate.json",{},{query:{method:"GET",params:{},isArray:!1}}).query();return b}]),angular.module("de.cismet.sip-html5-resource-registration.services").factory("de.cismet.sip-html5-resource-registration.services.geoTools",["leafletData",function(a){"use strict";var b,c,d,e,f,g,h;return b=new Wkt.Wkt,c={color:"#0000FF",fillOpacity:.3,weight:2,fill:!0,fillColor:"#1589FF",riseOnHover:!0,clickable:!0},e={polyline:!1,polygon:{shapeOptions:c,showArea:!0,metric:!0,allowIntersection:!1,drawError:{color:"#e1e100",message:"<strong>Oh snap!<strong> you can't draw that!</strong>"}},rectangle:{shapeOptions:c,metric:!0},circle:!1,marker:!1},d={polyline:!1,polygon:!1,rectangle:!1,circle:!1,marker:!1},f=function(a){if(a.spatialcoverage&&a.spatialcoverage.geo_field){var d=a.spatialcoverage.geo_field;b.read(d.substr(d.indexOf(";")+1));var e=b.toObject(c);return e.setStyle(c),e}},g=function(a,b){if(b&&a.spatialcoverage){var c="SRID=4326;"+b;a.spatialcoverage.geo_field=c}},h=function(b){a.getMap(b).then(function(a){setTimeout(function(){a.invalidateSize()},50)})},{wicket:b,defaultStyle:c,defaultDrawOptions:e,noDrawOptions:d,readSpatialCoverage:f,writeSpatialCoverage:g,fireResize:h}}]),angular.module("de.cismet.sip-html5-resource-registration.services").factory("de.cismet.sip-html5-resource-registration.services.SearchService",["$resource","de.cismet.sip-html5-resource-registration.services.services.Base64","$q","$interval","AppConfig",function(a,b,c,d,e){"use strict";var f,g,h,i,j;return f=e.searchService,g=b.encode(f.username+":"+f.password),i=a(f.host+"/searches/SWITCHON.de.cismet.cids.custom.switchon.search.server.MetaObjectUniversalSearchStatement/results",{limit:20,offset:0,omitNullValues:!0,deduplicate:!0},{search:{method:"POST",params:{limit:"@limit",offset:"@offset"},isArray:!1,headers:{Authorization:"Basic "+g}}}),h=a(f.host+"/SWITCHON.:classname/:objId",{omitNullValues:!0,deduplicate:!1},{get:{method:"GET",isArray:!1,headers:{Authorization:"Basic "+g}}}),j=function(b,e,j,k,l){var m,n,o,p,q,r,s,t,u,v,w;return n=angular.noop,m=c.defer(),o={list:[{key:"Query",value:b}]},e&&e.length>0?-1===e.indexOf("$total")&&(e+=",$total"):e="$total",(l||n)(0,-1,"success"),u=1,t=d(function(){(l||n)(u,-1,"success"),u++},100,100),k&&j&&j>0&&k>0&&k%j!==0&&(k=0),p={$promise:m.promise,$resolved:!1,$offset:k,$limit:j,$length:0},r=i.search({limit:j,offset:k},o),s=function(b){var e,i,j;j=b[0].$collection,i=function(a){var e,f,g,i,k,o,q,s,u,v,w;for(g=[],k=0;k<a.$collection.length;++k)g[a.$collection[k].key]=a.$collection[k].value;for(q=[],v=0,j.length>0?w=!0:d.cancel(t),(l||n)(v,j.length,"success"),u=function(){w===!0&&(w=!d.cancel(t)),(l||n)(++v,j.length,"success")},k=0;k<j.length;++k)i=g[j[k].LEGACY_CLASS_ID],o=j[k].LEGACY_OBJECT_ID,s=h.get({classname:i,objId:o}).$promise,s["finally"](u),q[k]=s;f=function(a){var c,d,e;for(k=0;k<j.length;++k)j[k].object=a[k];for(c in r)!r.hasOwnProperty(c)||"$"===c.charAt(0)&&"$"===c.charAt(1)||(p[c]=r[c]);if(e=b[1].$collection,e&&e.length>0)for(k=0;k<e.length;k++)if(d=e[k],"$total"===d.key&&d.value&&1===d.value.length){p.$total=parseInt(d.value[0].value,10),e.splice(k,1);break}p.$length=j.length,p.$total&&0!==p.$total||(p.$total=j.length),p.$filterTags=b[1].$collection,m.resolve(p)},e=function(a){p.$error="cannot lookup objects",p.$response=a,p.$resolved=!0,m.reject(p),d.cancel(t),(l||n)(1,1,"error")},c.all(q).then(f,e)},e=function(a){p.$error="cannot lookup class names",p.$response=a,p.$resolved=!0,m.reject(p),d.cancel(t),(l||n)(1,1,"error")},a(f.host+"/searches/SWITCHON.de.cismet.cids.custom.switchon.search.server.ClassNameSearch/results",{},{exec:{method:"POST",isArray:!1,headers:{Authorization:"Basic "+g}}}).exec({list:[{key:"Domain",value:"SWITCHON"}]}).$promise.then(i,e)},q=function(a){p.$error="cannot search for resources",p.$response=a,p.$resolved=!0,m.reject(p),d.cancel(t),(l||n)(1,1,"error")},e&&e.length>0?(v=a(f.host+"/searches/SWITCHON.de.cismet.cids.custom.switchon.search.server.PostFilterTagsSearch/results",{},{exec:{method:"POST",isArray:!1,headers:{Authorization:"Basic "+g}}}),v=v.exec({list:[{key:"Query",value:b},{key:"FilterTagGroups",value:e}]})):(w=c.defer(),v={},v.$collection=[],v.$promise=w.promise,v.$resolved=!0,w.resolve(v)),c.all([r.$promise,v.$promise]).then(s,q),p},{search:j,entityResource:h}}]).factory("eu.water-switch-on.sip.services.Base64",function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(b){var c,d,e,f,g,h="",i="",j="",k=0;do c=b.charCodeAt(k++),d=b.charCodeAt(k++),i=b.charCodeAt(k++),e=c>>2,f=(3&c)<<4|d>>4,g=(15&d)<<2|i>>6,j=63&i,isNaN(d)?g=j=64:isNaN(i)&&(j=64),h=h+a.charAt(e)+a.charAt(f)+a.charAt(g)+a.charAt(j),c=d=i="",e=f=g=j="";while(k<b.length);return h},decode:function(b){var c,d,e,f,g,h="",i="",j="",k=0,l=/[^A-Za-z0-9\+\/\=]/g;l.exec(b)&&console.error("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");do e=a.indexOf(b.charAt(k++)),f=a.indexOf(b.charAt(k++)),g=a.indexOf(b.charAt(k++)),j=a.indexOf(b.charAt(k++)),c=e<<2|f>>4,d=(15&f)<<4|g>>2,i=(3&g)<<6|j,h+=String.fromCharCode(c),64!==g&&(h+=String.fromCharCode(d)),64!==j&&(h+=String.fromCharCode(i)),c=d=i="",e=f=g=j="";while(k<b.length);return h}}}),angular.module("de.cismet.sip-html5-resource-registration.services").factory("de.cismet.sip-html5-resource-registration.services.TagGroupService",["$resource","eu.water-switch-on.sip.services.Base64","AppConfig",function(a,b,c){"use strict";var d,e,f,g,h,i,j,k;return h={"keyword-x-cuahsi":"X-CUAHSI"},d=[],f=c.searchService,g=b.encode(f.username+":"+f.password),i=a(f.host+"/searches/SWITCHON.de.cismet.cids.custom.switchon.search.server.TagsSearch/results",{limit:100,offset:0,omitNullValues:!0,deduplicate:!0},{search:{method:"POST",params:{},isArray:!1,headers:{Authorization:"Basic "+g}}}),j=function(a,b){var c,d;return c=b?{list:[{key:"taggroup",value:a},{key:"tags",value:b}]}:{list:[{key:"taggroup",value:a}]},d=i.search({},c)},e=function(a,b){var c,e,f;return d.hasOwnProperty(a)?d[a]:(c=j(a,b),e=[],e.$resolved=!1,e.$promise=c.$promise.then(function(a){for(f=0;f<a.$collection.length;f++)e.push(a.$collection[f]);return e.$resolved=!0,e}),d[a]=e,d[a])},k=function(a,b){return e(a,b)},{getTagList:k}}]),angular.module("").run(["$templateCache",function(a){"use strict";a.put("templates/confirmation.html",'<div class=modal-header><h3 class=modal-title>Confirmation</h3></div><div class=modal-body><p>This ia a preview of the Open-Data Registration Tool.<br>Your inputs are <strong>not saved</strong> in the SWITCH-ON Meta-Data Repository!</p></div><div class=modal-footer><button class="btn btn-primary" type=button ng-click=$close()>OK</button></div>'),a.put("templates/geographicLocation.html",'<div class=row ng-controller="de.cismet.sip-html5-resource-registration.controllers.geoLocationController as geoController"><div class=col-md-9><leaflet id=mainmap defaults=mapData.defaults center=mapData.center height=600px width=820px></leaflet></div><div class=col-md-3><div class=row><div class=col-md-3><switch id=switch-bbox name=switch-bbox ng-model=geoController.mode.drawBBox ng-change="geoController.switchMode(\'drawBBox\')"></switch></div><div class=col-xs-8><strong>Define bounding box or polygon</strong></div></div><div class=row><div class=col-md-3><switch id=switch-europe name=switch-europe ng-model=geoController.mode.selectEC ng-change="geoController.switchMode(\'selectEC\')"></switch></div><div class=col-xs-9><strong>Select European country or region</strong></div></div><div class=row><div class=col-md-3><switch id=switch-world name=switch-world ng-model=geoController.mode.selectWC ng-change="geoController.switchMode(\'selectWC\')"></switch></div><div class=col-xs-9><strong>Select World country or region</strong></div></div><div class=row><div class=col-md-3><switch id=switch-coordinates name=switch-coordinates ng-model=geoController.mode.defineBBox ng-change="geoController.switchMode(\'defineBBox\')"></switch></div><div class=col-xs-9><strong>Enter bounding box coordinates</strong></div></div><div class=row ng-show=geoController.mode.selectEC><div class=col-md-12><hr><ui-select ng-model=geoController.contentLocation.name theme=bootstrap ng-disabled=disabled sortable on-select=geoController.onSelectedCountry($item)><ui-select-match>{{$select.selected.name}}</ui-select-match><ui-select-choices repeat="country.name as country in geoController.countries[\'countries-europe\'] | filter: {name: $select.search}" position=down style=max-height:350px><div ng-bind-html="country.name | highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class=row ng-show=geoController.mode.selectWC><div class=col-md-12><hr><ui-select ng-model=geoController.contentLocation.name theme=bootstrap ng-disabled=disabled sortable on-select=geoController.onSelectedCountry($item)><ui-select-match>{{$select.selected.name}}</ui-select-match><ui-select-choices repeat="country.name as country in geoController.countries[\'countries-world\'] | filter: {name: $select.search}" position=down style=max-height:350px><div ng-bind-html="country.name | highlight: $select.search"></div></ui-select-choices></ui-select></div></div><div class=row ng-show=geoController.mode.defineBBox><div class=col-md-10><hr><form class=form-horizontal name=coordinatesForm id=coordinatesForm novalidate><div class=row><div class=col-md-12><label class=control-label for=north>North Bound Latitude</label></div></div><div class="row form-group" ng-class="{\'has-error\': !coordinatesForm.north.$error.required && coordinatesForm.north.$invalid,\r\n                                    \'has-success\': !coordinatesForm.north.$error.required && !coordinatesForm.north.$invalid}"><div class=col-md-12><input type=number class=form-control id=north name=north ng-model=geoController.contentLocation.bounds.north min=-90.00000000000000000 max=90.0000000000000000 required></div></div><div class=row><div class=col-md-12><label class=control-label for=east>East Bound Longitude</label></div></div><div class="row form-group" ng-class="{\'has-error\': !coordinatesForm.east.$error.required && coordinatesForm.east.$invalid,\r\n                                    \'has-success\': !coordinatesForm.east.$error.required && !coordinatesForm.east.$invalid}"><div class=col-md-12><input class=form-control type=number id=east name=east ng-model=geoController.contentLocation.bounds.east min=-180.0000000000000000 max=180.0000000000000000 required></div></div><div class=row><div class=col-md-12><label class=control-label for=south>South Bound Latitude</label></div></div><div class="row form-group" ng-class="{\'has-error\': !coordinatesForm.south.$error.required && coordinatesForm.south.$invalid,\r\n                                    \'has-success\': !coordinatesForm.south.$error.required && !coordinatesForm.south.$invalid}"><div class=col-md-12><input type=number class=form-control id=south name=south ng-model=geoController.contentLocation.bounds.south min=-90.00000000000000000 max=90.00000000000000000 required></div></div><div class=row><div class=col-md-12><label class=control-label for=west>West Bound Longitude</label></div></div><div class="row form-group" ng-class="{\'has-error\': !coordinatesForm.west.$error.required && coordinatesForm.west.$invalid,\r\n                                    \'has-success\': !coordinatesForm.west.$error.required && !coordinatesForm.west.$invalid}"><div class=col-md-12><input type=number class=form-control id=west name=west ng-model=geoController.contentLocation.bounds.west min=-180.0000000000000000 max=180.0000000000000000 required></div></div><div class=row><div class=col-md-12><button title=Apply name=applyButton id=applyButton class="btn btn-default" ng-click=geoController.applyBoundingBox() ng-disabled="coordinatesForm.$error.required || coordinatesForm.$invalid">Apply</button></div></div></form></div></div></div></div>'),a.put("templates/licenseAndConditions.html",'<form class=form-horizontal id=licenseForm name=licenseForm ng-controller="de.cismet.sip-html5-resource-registration.controllers.licenseController as licenseController"><div class="row form-group" ng-class="{\'has-error\':wizard.hasError === \'datasetAccessconditions\'}"><label for=datasetAccessconditions class="col-md-2 form-control-label">Access Conditions</label><div class=col-md-3><select class=form-control id=datasetAccessconditions name=datasetAccessconditions ng-options="tag as tag.name for tag in tags[\'accessconditions\'] track by tag.name" ng-model=dataset.accessconditions ng-change=showInfoMessage(dataset.accessconditions.description); required></select></div></div><div class="row form-group" ng-class="{\'has-error\':wizard.hasError === \'datasetLicensestatement\'}"><label for=datasetLicensestatement class="col-md-2 form-control-label">License Statement</label><div class=col-md-8><textarea class=form-control id=datasetDescription name=datasetLicensestatement placeholder="Additional conditions for accessing and using the data." rows=6 ng-model=dataset.licensestatement ng-focus="showInfoMessage(\'Please provide a brief statement or URL to the license which applies to the usage of the dataset.\')" ng-required="dataset.accessconditions && dataset.accessconditions.name === \'other\'"></textarea></div></div><div class="form-group row" ng-class="{\'has-error\':wizard.hasError === \'datasetContactperson\'}"><label for=datasetContactperson class="col-md-2 form-control-label">Contact Person</label><div class=col-md-8><input class=form-control id=datasetContactperson name=datasetContactperson placeholder="Optional point of contact information" ng-model=dataset.contact.name ng-focus="showInfoMessage(\'Please provide a name and if possible an emal address of the contact person responsible for the establishment, management, maintenance and distribution of dataset.\');"></div></div><div class="row form-group" ng-class="{\'has-error\':wizard.hasError === \'datasetCitation\'}"><label for=datasetCitation class="col-md-2 form-control-label">Citation / DOI</label><div class=col-md-8><textarea class=form-control id=datasetDescription name=datasetCitation placeholder="Optional citation information" rows=3 ng-model=dataset.contact.description ng-focus="showInfoMessage(\'Please provide bibliographic citation or a Digital Object Identifier (<a href=\\\'https://www.doi.org/\\\' target=\\\'_blank\\\'>DOI</a>).\')">  \r\n            </textarea></div></div><div class="row form-group" ng-class="{\'has-error\':wizard.hasError === \'datasetLineage\'}"><label for=datasetLineage class="col-md-2 form-control-label">Data Lineage</label><div class=col-md-8><textarea class=form-control id=datasetDescription name=datasetLineage placeholder="Optional data lineage / data provenance information" rows=6 ng-model=dataset.metadata[0].description ng-focus="showInfoMessage(\'When appropriate, please provide a statement on the <a href=\\\'https://en.wikipedia.org/wiki/Data_lineage\\\' target=\\\'_blank\\\'>data lineage</a>  of the resource. That is, whether and how the dataset was derived (transformed, combined, repurposed, ...) from other datasets.\')">  \r\n            </textarea></div></div></form>'),a.put("templates/openDataRegistration.html",'<form class=form-horizontal id=odRegistrationForm name=odRegistrationForm ng-controller="de.cismet.sip-html5-resource-registration.controllers.odRegistrationController as odRegistrationController"><div class="form-group row" ng-class="{\'has-error\':wizard.hasError === \'datasetName\'}"><label for=datasetName class="col-md-1 form-control-label">Name</label><div class=col-md-8><input class=form-control id=datasetName name=datasetName placeholder="Name of the dataset" ng-model=dataset.name required ng-focus="showInfoMessage(\'Please provide a characteristic, and often unique, name by which the dataset is known.\');"></div></div><div class="row form-group" ng-class="{\'has-error\':wizard.hasError === \'datasetContentlocation\'}"><label for=datasetContentlocation class="col-md-1 form-control-label">Link</label><div class=col-md-2><select class=form-control id=datasetFunction name=datasetFunction ng-options="tag as tag.name for tag in tags[\'function\'] track by tag.name" ng-model=dataset.representation[0].function ng-change="showInfoMessage(\'The \' + dataset.representation[0].function.description + \' / dataset.\');" required></select></div><div class=col-md-6><input type=url class=form-control name=datasetContentlocation id=datasetContentlocation placeholder="URL of the dataset" ng-model=dataset.representation[0].contentlocation ng-focus="showInfoMessage(\'Please provide a download link to the dataset or a link to additional information about the dataset.\');" ng-change=odRegistrationController.checkLink(dataset.representation[0].contentlocation) ng-model-options="{ debounce: 500 }" required></div><div class=col-md-3><select class=form-control id=datasetContenttype name=datasetContenttype placeholder="Description of the dataset" ng-options="tag as tag.description for tag in tags[\'content type\'] track by tag.name" ng-model=dataset.representation[0].contenttype ng-change="showInfoMessage(\'The <a href=\\\'https://en.wikipedia.org/wiki/Media_type\\\' target=\\\'_blank\\\'>media type</a> of the dataset is <i>\'+dataset.representation[0].contenttype.name + \'</i> (\' + dataset.representation[0].contenttype.description + \').\');" required></select></div></div><div class="form-group row" ng-class="{\'has-error\':wizard.hasError === \'datasetDescription\'}"><label for=datasetDescription class="col-md-1 form-control-label">Description</label><div class=col-md-8><textarea class=form-control id=datasetDescription name=datasetDescription placeholder="Description of the dataset" rows=8 ng-model=dataset.description ng-focus="showInfoMessage(\'Please provide a brief narrative summary of the content of the dataset.\')" required></textarea></div></div><div class="form-group row" ng-class="{\'has-error\':wizard.hasError === \'datasetTags\'}"><label for=datasetTags class="col-md-1 form-control-label">Keywords</label><div class=col-md-8><ui-select id=datasetTags name=datasetTags class=form-control multiple limit=20 ng-model=dataset.tags theme=bootstrap ng-disabled=disabled sortable on-select="showInfoMessage(\'Please select one or more keywords from the <strong>extended</strong> CUAHSI Hydrologic Ontology for Discovery (X-CUAHSI) that best characterize the dataset. <br>Please click <a href=\\\'http://his.cuahsi.org/ontologyfiles.html\\\' target=\\\'_blank\\\'>here</a> for more information about the CUAHSI ontology. Get in touch with the <a href=\\\'mailto:switchon.wm@gmail.com\\\'>SWITCH-ON Consortium</a> if you want to make a proposal for new keywords and thus an extension of the X-CUSHAI ontology!\')"><ui-select-match placeholder="Please click here to open a list of selectable X-CUAHSI keywords.">{{$item.name}}</ui-select-match><ui-select-choices repeat="tag in tags[\'keywords - X-CUAHSI\'] | filter: {name: $select.search}" group-by=odRegistrationController.groupBy><div ng-bind-html="tag.name | highlight: $select.search"></div></ui-select-choices></ui-select></div></div></form>'),
a.put("templates/summary.html",'<div ng-controller="de.cismet.sip-html5-resource-registration.controllers.summaryController as summaryController"><div class=row><div class=col-md-6><div class=row><label class=col-md-3>Name</label><div class=col-md-9>{{dataset.name}}</div></div><div class=row><label class=col-md-3 style="text-transform: capitalize">{{dataset.representation[0].function.name}}-Link</label><div class=col-md-9><a href={{dataset.representation[0].contentlocation}} target=_blank title={{dataset.name}}>{{dataset.representation[0].contentlocation}}</a></div></div><div class=row><label class=col-md-3>Content-Type</label><div class=col-md-9><span class="label label-success" title={{dataset.representation[0].contenttype.description}}>{{dataset.representation[0].contenttype.name}}</span></div></div><div class=row><label class=col-md-3>Description</label><div class=col-md-9><p>{{dataset.description}}</p></div></div><div class=row><label class=col-md-3>Keywords</label><div class=col-md-9><span ng-repeat="tag in dataset.tags"><span class="label label-primary">{{tag.name}}</span></span></div></div><div class=row><label class=col-md-3>Conditions</label><div class=col-md-9><span class="label label-warning" title={{dataset.accessconditions.description}}>{{dataset.accessconditions.name}}</span></div></div><div class=row ng-if=dataset.licensestatement><label class=col-md-3>License</label><div class=col-md-9><p>{{dataset.licensestatement}}</p></div></div><div class=row ng-if="dataset.contact && dataset.contact.name"><label class=col-md-3>Contact Person</label><div class=col-md-9>{{dataset.contact.name}}</div></div><div class=row ng-if="dataset.contact && dataset.contact.description"><label class=col-md-3>Citation / DOI</label><div class=col-md-9>{{dataset.contact.description}}</div></div><div class=row ng-if=dataset.metadata[0].description><label class=col-md-3>Data Lineage</label><div class=col-md-9>{{dataset.metadata[0].description}}</div></div></div><div class=col-md-6><leaflet id=summarymap defaults=mapData.defaults center=mapData.center height=460px width=540px></leaflet></div></div></div>'),a.put("templates/wizard-step-tpl.html",'<section ng-show=selected ng-class="{current: selected, done: completed}" class=step><div class="panel panel-primary"><div class=panel-heading><h1 class=panel-title>{{wzTitle}}</h1></div><div class=panel-body><div ng-transclude></div></div><div class="panel-footer clearfix"><button type=button class="btn btn-primary pull-right" wz-next ng-disabled=!wzData.canProceed>{{wzData.proceedButtonText}}</button> <button type=button class="btn btn-default pull-right" wz-previous ng-disabled=!wzData.canGoBack>Previous</button></div></div></section>'),a.put("templates/wizard-tpl.html",'<div><div class=steps ng-transclude></div><ul class="steps-indicator steps-{{getEnabledSteps().length}}" ng-if=!hideIndicators><li ng-class="{default: !step.completed && !step.selected, \r\n                  current: step.selected && !step.completed, \r\n                  done: step.completed && !step.selected, \r\n                  editing: step.selected && step.completed}" ng-repeat="step in getEnabledSteps()"><a ng-click=goTo(step)>{{step.title || step.wzTitle}}</a></li></ul></div>')}]);
//# sourceMappingURL=sip-html5-resource-registration.min.js.map